# Hoorcollege SQL 14/10/2021

## Inhoud

[TODO]

## Subquery (IN deel 2)

Een subquery is een extensie op het [IN](week39/SQL-2021-09-30-H.md#IN) keywoord. In plaats dat je een lijst met waardes mee geeft, geef je een SQL-query. Deze query moet een en precies een kolom terug geven. Deze query wordt als eerste uitgevoerd en geeft een lijst terug. Die lijst staat dan in een normale `IN` en werkt verder hetzelfde. Een subquery geef je aan met `()`. Met een subquery kun je alleen de waardes van de hooftquery terug geven. Je kunt dus **niet** waardes van de tabel uit de subquery terug geven.

```sql
SELECT achternaam
FROM medewerker
WHERE afdeling IN (
	SELECT naam
	FROM afdeling
	WHERE locatie = 'Utrecht'
)
ORDER BY achternaam
```

Dit zal achter de schermen worden omgeschreven naar:

```sql
SELECT achternaam
FROM medewerker
WHERE afdeling IN ('Marketing', 'Management', ...)
ORDER BY achternaam
```

Door gebruik van een subquery maak je het `IN` dynamischer.

```ad-info
title: Tip
Een subquery kun je nesten in een subquery
```

### UPDATE en DELETE

Als je met een [UPDATE](week38/SQL-2021-09-22-H.md#UPDATE) of [DELETE](week38/SQL-2021-09-22-H.md#DELETE) wilt gebruiken met waardes uit een andere tabel, dan gebruik je ook een subquery.

```sql
DELETE FROM tabel1
WHERE column1 IN (
	SELECT column2
	FROM tabel2
	WHERE column3 = 'waarde'
)
```

```ad-warning
title: Let op!
Een `UPDATE` of `DELETE` kan **nooit** een `JOIN` hebben. Als je een andere tabel wilt gebruiken voor het afvangen van waardes, dan **moet** je een subquery gebruiken.
```

## AS (Deel 2)

*Uitbreiding op [AS](week39/SQL-2021-09-30-H.md#AS).*

Een alias kun je ook gebruiken op een kolom naam. Je kunt zo kolommen hernoemen als je bijvoorbeeld een berekening doet, of als je een functie gebruikt.

```sql
SELECT maand_salaris * 12 AS jaar_salaris
FROM medewerker
```

## Functies
