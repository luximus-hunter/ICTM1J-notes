# Hoorcollege SQL 14/10/2021

## Inhoud

[TODO]

## Subquery (IN deel 2)

Een subquery is een extensie op het [IN](week39/SQL-2021-09-30-H.md#IN) keywoord. In plaats dat je een lijst met waardes mee geeft, geef je een SQL-query. Deze query moet een en precies een kolom terug geven. Deze query wordt als eerste uitgevoerd en geeft een lijst terug. Die lijst staat dan in een normale `IN` en werkt verder hetzelfde. Een subquery geef je aan met `()`.

```sql
SELECT achternaam
FROM medewerker
WHERE afdeling IN (
	SELECT naam
	FROM afdeling
	WHERE locatie = 'Utrecht'
)
ORDER BY achternaam
```

Dit zal achter de schermen worden omgeschreven naar:

```sql
SELECT achternaam
FROM medewerker
WHERE afdeling IN ('Marketing', 'Management', ...)
ORDER BY achternaam
```

Door gebruik van een subquery maak je het `IN` dynamischer.

### UPDATE en DELETE

Als je met een [UPDATE](week38/SQL-2021-09-22-H.md#UPDATE) of [DELETE](week38/SQL-2021-09-22-H.md#DELETE) wilt gebruiken met waardes uit een andere tabel, dan gebruik je ook een subquery.

```sql
DELETE FROM tabel1
WHERE column1 IN (
	SELECT column2
	FROM tabel2
	WHERE column3 = 'waarde'
)
```