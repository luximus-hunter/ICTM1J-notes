# SQL Hoorcollege 30-09-2021

## Inhoud

- [JOIN](#JOIN)
- [ON](#ON)
- [AS](#AS)
- [AND OR en haakjes](#AND%20OR%20en%20haakjes)
- [SQL Injectie](#SQL%20Injectie)

## JOIN

Om meerdere tabellen met elkaar te linken bebruik je het `JOIN` statement. Dit geeft je alle mogelijke combinaties van de twee tabellen. `JOIN` statements zijn standaard een `INNER JOIN`. Dit hoeft niet genoemt te worden omdat het de standaard is. Je kunt het optioneel maken met blokhaken: `[INNER] JOIN`.

Met de `SELECT` statement moet je wel aangeven uit welke tabel de kollom komt als deze in beide tabellen bestaat. Hebben allebei de tabellen een kollom met de naam `naam`? Dan moet je hem aanroepen met `tabel1.naam`. Anders kun je de tabel weg laten.

```SQL
SELECT * FROM tabel1
JOIN tabel2
```

```SQL
SELECT * FROM tabel1
[INNER] JOIN tabel2
```

## ON

Met het `ON` keywoord kun je aangeven welke kollomen hetzelfde moeten zijn. Hier kun je [vergelijkingen](../week38/SQL-2021-09-22-H.md#Vergelijkingen) aan toevoegen. Je joint de rechter aan de linker tabel (telefoon = links, app = rechts).

```SQL
SELECT * FROM tabel1 
[INNER] JOIN tabel2
ON tabel1.id = tabel2.tabel1_id
```

**Voorbeeld**
```SQL
SELECT naam, woonplaats FROM dier
JOIN klant ON klant.klantnummer = dier.klantnummer
WHERE woonplaats = 'Zwolle'
```

**Voorbeeld**
```SQL
SELECT medewerker.naam, afdeling.naam, locatie FROM medewerker
JOIN afdeling ON afd = anr
```

## AS

```SQL
SELECT M.naam, A.naam, A.locatie FROM medewerker AS M
JOIN afdeling AS A ON M.afd = A.anr
```

De `AS` kan worden weggelaten -> kan ook als `[AS]`.

## AND, OR, en haakjes

### AND

```SQL
SELECT * FROM gerecht
WHERE bereidingstijd = 20
AND bereidingstijd = 5
AND bereidingstijd = 8
```
*Werkt niet* (is een `&&` uit PHP)

### OR
```SQL
SELECT * FROM gerecht
WHERE bereidingstijd = 20
OR bereidingstijd = 5
```
*Werkt wel* (is een `||` uit PHP)

### IN

```SQL
WHERE a.locatie IN ('Leiden', 'Utrecht', 'De Meern')
```

### Haakjes

**`()` eerst, dan `AND`, dan `OR`**

## SQL Injectie
```SQL
SELECT 8 FROM user
WHERE username = 'hacker'
AND password = '[1' OR 1='1]'
# Blokhaken voor aanduiding van de input.
# Moet je wegdenken.
```
*`1' OR 1='1` is zeer gevaarlijk* (SQL Injection)