# Hoorcollege SQL 28/10/2021

## Inhoud

- [TODO]

## Statistische functies

## GROUP BY

Groepeer rijen op een kolom waarde met een `GROUP BY`. Dit kun je toepassen op alle standaard functies (zie [functies](../week41/SQL-2021-10-14-H.md#Functies)). Je kunt `GROUP BY` ook meerdere kolommen meegeven, gescheiden met een `,`.

Met een `GROUP BY` kun je een `COUNT()` dus laten gelden per kolom waarde in plaats van de hele tabel.

```sql
SELECT afd, AVG(maandsal)
FROM medewerker
GROUP BY afd
```

## HAVING

`HAVING` gaat altijd met een [GROUP BY](#GROUP%20BY). Je kunt een `HAVING` gebruiken als "`WHERE` op het resultaat van een query". Een `HAVING` is eigenlijk een `WHERE` voor na een [GROUP BY](#GROUP%20BY).

```sql
SELECT afd, AVG(maandsal)
FROM medewerker
GROUP BY afd
HAVING AVG(maandsal) >= 2000
```

## Gecorreleerde subquery's

_Uitbreiding op [subquery](week41/SQL-2021-10-14-H.md#Subquery%20IN%20deel%202)_

Je kunt in een subquery wel de kolommen uit de hoofdtabel gebruiken.

```sql
SELECT M.naam, M.maandsal
FROM medewerker M
WHERE M.maandsal > (
	SELECT C.maandsal
	FROM medewerker C
	WHERE C.mnr = M.chef
)
```
